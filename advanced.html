

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced &mdash; py-graspi  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="https://owodolab.github.io/py-graspi/advanced.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=dabd2559"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API Overview" href="api_overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            py-graspi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pyGraspiFunctionality.html">Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyGraspiDescriptors.html">Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyGraspiInputs.html">Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyGraspiExamples.html">Example of Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyGraspiRepresentation.html">Graph-based representation of microstructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyGraspiDefinitions.html">Basic Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_overview.html">API Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#to-run-on-debug-mode">To Run on DEBUG mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-plt-files-to-txt-files">Converting .plt files to .txt files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#translate-image-file-into-rescaled-txt-file">Translate Image File Into Rescaled .txt File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-visualization">Example Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-3d-morphologies-tests">2D &amp; 3D Morphologies Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-py-graspi-on-the-library-of-morphologies">Running Py-GraSPI on the Library of Morphologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tortuosity-heatmap-visualization">Tortuosity HeatMap Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jupyter-notebook-to-visualize-heatmap">Jupyter NoteBook to Visualize HeatMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-api-documentation">Generate API Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-py-pi-package">Update Py-Pi Package</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">py-graspi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Advanced</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/advanced.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced">
<span id="id1"></span><h1>Advanced<a class="headerlink" href="#advanced" title="Link to this heading"></a></h1>
<p>The Py-GraSPI package also included scripts with advanced functionality mostly for developers.</p>
<section id="to-run-on-debug-mode">
<h2>To Run on DEBUG mode<a class="headerlink" href="#to-run-on-debug-mode" title="Link to this heading"></a></h2>
<p>To run graph.py on debug mode so that all debug statements are printed to the terminal, set the DEBUG environment to 1 (True)</p>
<p>If on Windows Powershell,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run<span class="w"> </span><span class="nv">$env</span>:DEBUG<span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>If on Windows Command Prompt</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>If on MacOS/Linux</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">DEBUG</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p><strong>After setting the compilation mode to DEBUG mode, you can now run graph.py regularly through command line, which should print out debug statements to the terminal.</strong></p>
</section>
<section id="converting-plt-files-to-txt-files">
<h2>Converting .plt files to .txt files<a class="headerlink" href="#converting-plt-files-to-txt-files" title="Link to this heading"></a></h2>
<p>Numerical simulations can be saved using .plt file. Py-GraSPI provides tool to convert the plt file into txt file - following array format, see syntax and the example below (assuming in the tools/converters directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>plt_to_txt.py<span class="w"> </span><span class="o">[</span>pathname<span class="o">]</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>plt_to_txt.py<span class="w"> </span>plt/5x4x3.plt
</pre></div>
</div>
</section>
<section id="translate-image-file-into-rescaled-txt-file">
<h2>Translate Image File Into Rescaled .txt File<a class="headerlink" href="#translate-image-file-into-rescaled-txt-file" title="Link to this heading"></a></h2>
<p>Py-GraSPI provide also tool to convert black and white image into txt file and rescale it with assumed ratio (provided as fraction, e.g., 0.5). See syntax and the example (assuming in the tools/converters directory):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>img_to_txt.py<span class="w"> </span><span class="o">{</span>pathname<span class="w"> </span>of<span class="w"> </span>image<span class="w"> </span>file<span class="o">}</span><span class="w"> </span><span class="o">{</span>Resize<span class="w"> </span>calculation<span class="w"> </span>amount<span class="o">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>img_to_txt.py<span class="w"> </span>../../data/2phase/2D-morphologies/data/images/data_0.5_2.2_001900.png<span class="w"> </span><span class="m">0</span>.15
</pre></div>
</div>
</section>
<section id="example-visualization">
<h2>Example Visualization<a class="headerlink" href="#example-visualization" title="Link to this heading"></a></h2>
<p>This section explains how to visualize a microscopy image by filtering both it’s white and black vertices. The tool converts from image to graph.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>img_to_graph.py<span class="w"> </span><span class="o">{</span>pathname<span class="w"> </span>of<span class="w"> </span>image<span class="w"> </span>file<span class="o">}</span><span class="w"> </span><span class="o">{</span>Resize<span class="w"> </span>calculation<span class="w"> </span>amount<span class="o">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>img_to_graph.py<span class="w"> </span>../../data/2phase/2D-morphologies/images/data_0.5_2.2_001900.png<span class="w"> </span><span class="m">0</span>.15
</pre></div>
</div>
<dl class="simple">
<dt>This creates a truncated version of the mycelium image (for runtime purposes) and outputs the largest subgraph of the following filtered graphs:</dt><dd><ol class="arabic simple">
<li><p>The first one is a white only vertex graph</p></li>
<li><p>The second one is a black only vertex graph.</p></li>
</ol>
</dd>
</dl>
<p>You can interact with the plots to find the appropriate visualization.</p>
</section>
<section id="d-3d-morphologies-tests">
<h2>2D &amp; 3D Morphologies Tests<a class="headerlink" href="#d-3d-morphologies-tests" title="Link to this heading"></a></h2>
<p>To run the 2d and 3d morphologies you will need to setup notebook and pip install the graspi_igraph package.</p>
<p>First you will need to git clone the current repo, and install packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/owodolab/py-graspi.git
pip<span class="w"> </span>install<span class="w"> </span>py-graspi
pip<span class="w"> </span>install<span class="w"> </span>notebook
</pre></div>
</div>
<p>Finally, you will be able to use the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter<span class="w"> </span>notebook
</pre></div>
</div>
<p>This will bring you to the testing files on jupyter.</p>
<p>Navigate to the file <strong>graspi_igraph_notebook.ipynb</strong> under the <strong>notebook</strong> directory.</p>
</section>
<section id="running-py-graspi-on-the-library-of-morphologies">
<h2>Running Py-GraSPI on the Library of Morphologies<a class="headerlink" href="#running-py-graspi-on-the-library-of-morphologies" title="Link to this heading"></a></h2>
<p>Change folder to py-graspi/tests, generate the executable for the script, and run the code</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>tests
chmod<span class="w"> </span>+x<span class="w"> </span>run.sh
./run.sh<span class="w"> </span>&lt;file_type&gt;
</pre></div>
</div>
<p>Substitute <cite>&lt;file_type&gt;</cite> with either <cite>txt</cite> or <cite>pdf</cite> for the desired output type.</p>
<p><strong>Example:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./run.sh<span class="w"> </span>txt
</pre></div>
</div>
<p>After running the command, the automatic report generation will begin.
The following will print when the report generation begins:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Generating</span> <span class="n">PDF</span> <span class="p">(</span><span class="n">If</span> <span class="n">on</span> <span class="n">pdf</span> <span class="n">mode</span><span class="p">)</span>
<span class="n">Generating</span> <span class="n">Text</span> <span class="n">Files</span>
</pre></div>
</div>
</section>
<section id="tortuosity-heatmap-visualization">
<h2>Tortuosity HeatMap Visualization<a class="headerlink" href="#tortuosity-heatmap-visualization" title="Link to this heading"></a></h2>
<p>In folder tools, you find scripts to visualize tortuosity:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tortuosity.py<span class="w"> </span><span class="o">{</span>pathname<span class="w"> </span>of<span class="w"> </span>file<span class="o">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tortuosity.py<span class="w"> </span>../../data/2phase/2D-morphologies/data/data_0.5_2.2_001900.txt
</pre></div>
</div>
</section>
<section id="jupyter-notebook-to-visualize-heatmap">
<h2>Jupyter NoteBook to Visualize HeatMap<a class="headerlink" href="#jupyter-notebook-to-visualize-heatmap" title="Link to this heading"></a></h2>
<p>Make sure Jupyter Notebook is installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>jupyter
</pre></div>
</div>
<p>Run jupyter notebook with following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter<span class="w"> </span>notebook
</pre></div>
</div>
<p>Open up <cite>tortuosity.ipynb</cite> under the <cite>tools/tortuosity</cite> directory.</p>
</section>
<section id="generate-api-documentation">
<h2>Generate API Documentation<a class="headerlink" href="#generate-api-documentation" title="Link to this heading"></a></h2>
<p>In order to generate an API using sphinx, you need to follow the installation of py-graspi.</p>
<p>Install Sphinx and all required packages to generate documentation in the project root directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>sphinx<span class="w"> </span>sphinx_rtd_theme<span class="w"> </span>setuptools<span class="w"> </span>sphinxcontrib.details.directive
</pre></div>
</div>
<p>Install ghp-import to host documentation in the project root directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>ghp-import
</pre></div>
</div>
<div class="line-block">
<div class="line">To pull docstrings from Py-Graspi modules, run the following command:</div>
<div class="line">(Note: docs/source/ is the location of the .rst files, and src/py_graspi is the location of the project modules where sphinx will pull docstrings from.)</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sphinx-apidoc<span class="w"> </span>-o<span class="w"> </span>docs/source/<span class="w"> </span>src/py_graspi
</pre></div>
</div>
<p>To generate the local html files using the rst files, run this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sphinx-build<span class="w"> </span>-b<span class="w"> </span>html<span class="w"> </span>docs/source<span class="w"> </span>docs/build
</pre></div>
</div>
<p>Ensure that the files have been generated in docs/build.</p>
<p>To push the changes reflected on the html to the gh-pages branch on GitHub, essentially pushing changes to the site, run this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ghp-import<span class="w"> </span>-n<span class="w"> </span>-p<span class="w"> </span>-f<span class="w"> </span>docs/build/
</pre></div>
</div>
<p>Go to the GitHub repo and verify that the files were pushed to the gh-pages branch</p>
<p>Access and verify the documentation through the following URL: <a class="reference external" href="https://owodolab.github.io/py-graspi/">https://owodolab.github.io/py-graspi/</a>.</p>
</section>
<section id="update-py-pi-package">
<h2>Update Py-Pi Package<a class="headerlink" href="#update-py-pi-package" title="Link to this heading"></a></h2>
<p>If there are changes made to the to the PyGraspi package locally, these instructions can help push to Py-Pi.</p>
<ol class="arabic simple">
<li><p>To install setuptools, wheel and twine, run this command in terminal:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>setuptools<span class="w"> </span>wheel<span class="w"> </span>twine
</pre></div>
</div>
<p>Ensure that the project already contains setup.py, README.md, _init_.py, LICENSE and other core files.</p>
<p><strong>Note:</strong> Make sure you update the version number in the setup.py file.</p>
<ol class="arabic simple" start="2">
<li><p>Build the distribution files, which creates a dist/ directory containing the .tar.gz and .whl files.</p></li>
</ol>
<p>First, CD into project root directory (where setup.py exists). Then, run this command in terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>setup.py<span class="w"> </span>sdist<span class="w"> </span>bdist_wheel
</pre></div>
</div>
<p>(Optional) It’s safe to delete the .tar.gz and .whl file of old versions so that the correct version gets pushed to PyPI</p>
<ol class="arabic simple" start="3">
<li><p>Login to PyPI, and retrieve your API token to upload the package using twine.</p></li>
</ol>
<p><strong>Note:</strong> You need to be a manager or owner of the package on PyPI to upload new versions.</p>
<ol class="arabic simple" start="4">
<li><p>Use twine to upload the distribution securely by running this command in terminal:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twine<span class="w"> </span>upload<span class="w"> </span>dist/*
</pre></div>
</div>
<p>When prompted for your API token, retrieve the API token that you can generate from PyPI.</p>
<p><strong>Note:</strong> The token will not be visible on the terminal for security reasons, so press enter after entering the token.</p>
<p>Verify that the new version has been uploaded successfully at the link <a class="reference external" href="https://pypi.org/project/py-graspi/">https://pypi.org/project/py-graspi/</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api_overview.html" class="btn btn-neutral float-left" title="API Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Olga Wodo, Michael Leung, Wenqi Zheng, Qi Pan, Jerry Zhou, Kevin Martinez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>